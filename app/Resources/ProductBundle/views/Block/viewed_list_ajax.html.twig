{% if products|length %}
    <div class="viewed-title"><span>{{ 'frontend.viewed_products'|trans([], 'ProductBundle') }}</span></div>
    <div class="catalog-flex">
        {% for product in products %}
            <div class="catalog-block catalog-block-viewed">
                {% if product.discount %}
                    {% set diff = product.price - product.discount %}
                    <div class="ribbon discount"><div>{{ (diff * 100 / product.price)|round }}%</div></div>
                {% endif %}
                <a href="{{ product_path(product) }}" class="image" itemprop="image" itemscope itemtype="https://schema.org/ImageObject">
                    <img class="lazyload" data-src="{{ asset(product.image.path) }}" src="" alt="{{ product.name }}" itemprop="contentUrl">
                </a>
                <div class="product-category"><a href="{{ path('product_list', {'slug': product.category.slug}) }}">{{ product.category.name }}</a></div>
                <div class="name"><a href="{{ product_path(product) }}">{{ product.getName }}</a></div>
            </div>
        {% endfor %}
    </div>
{% endif %}